"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8949],{8949:(I,S,d)=>{d.r(S),d.d(S,{SetPageModule:()=>u});var x=d(6895),p=d(433),a=d(5035),f=d(2598),g=d(5861),Z=d(7423);class T extends Z.Uw{write(i){var e=this;return(0,g.Z)(function*(){if(typeof navigator>"u"||!navigator.clipboard)throw e.unavailable("Clipboard API not available in this browser");if(void 0!==i.string)yield e.writeText(i.string);else if(i.url)yield e.writeText(i.url);else{if(!i.image)throw new Error("Nothing to write");if(!(typeof ClipboardItem<"u"))throw e.unavailable("Writing images to the clipboard is not supported in this browser");try{const n=yield(yield fetch(i.image)).blob(),o=new ClipboardItem({[n.type]:n});yield navigator.clipboard.write([o])}catch{throw new Error("Failed to write image")}}})()}read(){var i=this;return(0,g.Z)(function*(){if(typeof navigator>"u"||!navigator.clipboard)throw i.unavailable("Clipboard API not available in this browser");if(!(typeof ClipboardItem<"u"))return i.readText();try{const e=yield navigator.clipboard.read(),n=e[0].types[0],o=yield e[0].getType(n);return{value:yield i._getBlobData(o,n),type:n}}catch{return i.readText()}})()}readText(){var i=this;return(0,g.Z)(function*(){if(typeof navigator>"u"||!navigator.clipboard||!navigator.clipboard.readText)throw i.unavailable("Reading from clipboard not supported in this browser");return{value:yield navigator.clipboard.readText(),type:"text/plain"}})()}writeText(i){var e=this;return(0,g.Z)(function*(){if(typeof navigator>"u"||!navigator.clipboard||!navigator.clipboard.writeText)throw e.unavailable("Writting to clipboard not supported in this browser");yield navigator.clipboard.writeText(i)})()}_getBlobData(i,e){return new Promise((n,o)=>{const s=new FileReader;e.includes("image")?s.readAsDataURL(i):s.readAsText(i),s.onloadend=()=>{n(s.result)},s.onerror=l=>{o(l)}})}}const M=(0,Z.fo)("Clipboard",{web:()=>new T});var t=d(8256);class _{constructor(i,e){this.modalController=i,this.navParams=e,this.set=this.navParams.get("set")}ngOnInit(){}close(){this.modalController.dismiss(null,"cancel")}copy(){M.write({string:this.getExport()}),this.modalController.dismiss(null,"copy")}getExport(){let i="";for(const e of this.set.data)i+=e.first.trim()+"\t"+e.second.trim()+"\n";return i}}_.\u0275fac=function(i){return new(i||_)(t.Y36(a.IN),t.Y36(a.X1))},_.\u0275cmp=t.Xpm({type:_,selectors:[["app-export-modal"]],inputs:{set:"set"},decls:12,vars:1,consts:[["slot","end"],[3,"click"],[1,"ion-padding"],["auto-grow","true","readonly","true",3,"value"]],template:function(i,e){1&i&&(t.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),t._uU(3,"Export"),t.qZA(),t.TgZ(4,"ion-buttons",0)(5,"ion-button",1),t.NdJ("click",function(){return e.copy()}),t._uU(6,"Copy"),t.qZA(),t.TgZ(7,"ion-button",1),t.NdJ("click",function(){return e.close()}),t._uU(8,"Close"),t.qZA()()()(),t.TgZ(9,"ion-content",2)(10,"ion-item"),t._UZ(11,"ion-textarea",3),t.qZA()()),2&i&&(t.xp6(11),t.Q6J("value",e.getExport()))},dependencies:[a.YG,a.Sm,a.W2,a.Gu,a.Ie,a.g2,a.wd,a.sr,a.j9]});class h{constructor(i){this.modalController=i,this.text=""}ngOnInit(){}close(){this.modalController.dismiss(null,"cancel")}keyDownFunction(i){if("Tab"===i.key){i.preventDefault();let e=i.target.selectionStart,n=i.target.selectionEnd;i.target.value=i.target.value.substring(0,e)+"\t"+i.target.value.substring(n),i.target.selectionStart=i.target.selectionEnd=e+1}}add(){let i=this.text.split("\n"),e=[];for(const n of i){let o=n.split("\t");2==o.length&&e.push({first:o[0].trim(),second:o[1].trim()})}this.modalController.dismiss(e,"add")}}h.\u0275fac=function(i){return new(i||h)(t.Y36(a.IN))},h.\u0275cmp=t.Xpm({type:h,selectors:[["app-import-modal"]],decls:13,vars:1,consts:[["slot","end",3,"click"],[1,"ion-padding"],["auto-grow","true",3,"ngModel","keydown","ngModelChange"]],template:function(i,e){1&i&&(t.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),t._uU(3,"Import"),t.qZA(),t.TgZ(4,"ion-buttons",0),t.NdJ("click",function(){return e.add()}),t.TgZ(5,"ion-button"),t._uU(6,"Add"),t.qZA()(),t.TgZ(7,"ion-buttons",0),t.NdJ("click",function(){return e.close()}),t.TgZ(8,"ion-button"),t._uU(9,"Close"),t.qZA()()()(),t.TgZ(10,"ion-content",1)(11,"ion-item")(12,"ion-textarea",2),t.NdJ("keydown",function(o){return e.keyDownFunction(o)})("ngModelChange",function(o){return e.text=o}),t.qZA()()()),2&i&&(t.xp6(12),t.Q6J("ngModel",e.text))},dependencies:[a.YG,a.Sm,a.W2,a.Gu,a.Ie,a.g2,a.wd,a.sr,a.j9,p.JJ,p.On]});var C=d(1491);function b(r,i){1&r&&t._UZ(0,"div")}function v(r,i){1&r&&t._UZ(0,"div")}function y(r,i){1&r&&(t.TgZ(0,"ion-row",25)(1,"ion-label"),t._uU(2," No Cards found "),t.qZA()())}function w(r,i){if(1&r){const e=t.EpF();t.TgZ(0,"ion-col",38)(1,"ion-item",39)(2,"ion-label",40),t._UZ(3,"ion-icon",41),t._uU(4),t.qZA()()(),t.TgZ(5,"ion-col",42)(6,"ion-item",39)(7,"ion-label",40),t._UZ(8,"ion-icon",43),t._uU(9),t.qZA()()(),t.TgZ(10,"ion-col",38)(11,"ion-item",39)(12,"ion-label",40),t._UZ(13,"ion-icon",44),t._uU(14),t.qZA()()(),t.TgZ(15,"ion-col",42)(16,"ion-button",45),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit,s=t.oxw(3);return t.KtG(s.setStar(o._id))}),t._UZ(17,"ion-icon",46),t.qZA()()}if(2&r){const e=t.oxw().$implicit,n=t.oxw(3);t.xp6(4),t.hij(" \xa0 ",n.getStat(e._id,"wrong")," "),t.xp6(5),t.hij(" \xa0 ",n.getStat(e._id,"changed")," "),t.xp6(5),t.hij(" \xa0 ",n.getStat(e._id,"success")," "),t.xp6(2),t.Q6J("color",n.getStar(e._id)?"warning":"medium")}}function A(r,i){if(1&r){const e=t.EpF();t.TgZ(0,"ion-card")(1,"ion-grid")(2,"ion-row",27)(3,"ion-col",28)(4,"ion-item",29)(5,"ion-textarea",30),t.NdJ("ngModelChange",function(o){const l=t.CHM(e).$implicit;return t.KtG(l.first=o)}),t.qZA()()(),t.TgZ(6,"ion-col",28)(7,"ion-item",29)(8,"ion-textarea",31),t.NdJ("ngModelChange",function(o){const l=t.CHM(e).$implicit;return t.KtG(l.second=o)}),t.qZA()()(),t.YNc(9,w,18,4,"ng-template",32),t.TgZ(10,"ion-col",33)(11,"ion-button",34),t.NdJ("click",function(){const s=t.CHM(e).$implicit,l=t.oxw(3);return t.KtG(l.deleteCard(s._id))}),t._UZ(12,"ion-icon",35),t.qZA()(),t.TgZ(13,"ion-col",33)(14,"ion-button",23),t.NdJ("click",function(){const s=t.CHM(e).$implicit,l=t.oxw(3);return t.KtG(l.editCard(s._id))}),t._UZ(15,"ion-icon",36)(16,"ion-icon",37),t.qZA()()()()()}if(2&r){const e=i.$implicit,n=t.oxw(3);t.xp6(3),t.Q6J("sizeXl",n.isEditMode(e._id)?4:2),t.xp6(1),t.Q6J("lines",n.getLines()),t.xp6(1),t.Q6J("ngModel",e.first)("readonly",!n.isEditMode(e._id)),t.xp6(1),t.Q6J("sizeXl",n.isEditMode(e._id)?4:2),t.xp6(1),t.Q6J("lines",n.getLines()),t.xp6(1),t.Q6J("ngModel",e.second)("readonly",!n.isEditMode(e._id)),t.xp6(1),t.Q6J("ngIf",!n.isEditMode(e._id)),t.xp6(1),t.Q6J("sizeMd",n.isEditMode(e._id)?6:2)("sizeXl",n.isEditMode(e._id)?2:1)("sizeXs",n.isEditMode(e._id)?6:4),t.xp6(3),t.Q6J("sizeMd",n.isEditMode(e._id)?6:2)("sizeXl",n.isEditMode(e._id)?2:1)("sizeXs",n.isEditMode(e._id)?6:4),t.xp6(2),t.Q6J("hidden",!n.isEditMode(e._id)),t.xp6(1),t.Q6J("hidden",n.isEditMode(e._id))}}function J(r,i){if(1&r&&t.YNc(0,A,17,17,"ion-card",26),2&r){const e=t.oxw(2);t.Q6J("ngForOf",e.set.data)("ngForTrackBy",e.itemTrackBy)}}function U(r,i){if(1&r){const e=t.EpF();t.TgZ(0,"ion-grid")(1,"ion-row",5)(2,"ion-card",6)(3,"ion-card-header")(4,"ion-card-title")(5,"h4"),t._uU(6),t.qZA(),t.TgZ(7,"h4"),t._uU(8),t.qZA()()()(),t.TgZ(9,"ion-card",7)(10,"ion-card-header")(11,"ion-card-title"),t._uU(12," Learn "),t.qZA()()(),t.TgZ(13,"ion-card",7)(14,"ion-card-header")(15,"ion-card-title"),t._UZ(16,"ion-icon",8),t._uU(17," \xa0 Learn "),t.qZA()()()(),t.TgZ(18,"ion-row",5)(19,"ion-card",9),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.export())}),t.TgZ(20,"ion-card-header")(21,"ion-card-title"),t._uU(22," Export "),t.qZA()()(),t.TgZ(23,"ion-card",9),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.import())}),t.TgZ(24,"ion-card-header")(25,"ion-card-title"),t._uU(26," Import "),t.qZA()()()(),t.TgZ(27,"ion-row",5)(28,"ion-card",10)(29,"ion-item",11)(30,"ion-item",12)(31,"ion-text",13),t._uU(32),t.qZA()()(),t.TgZ(33,"ion-toolbar",6)(34,"ion-item")(35,"ion-label"),t._uU(36,"Sort:\xa0"),t.qZA(),t.TgZ(37,"ion-select",14),t.NdJ("ngModelChange",function(o){t.CHM(e);const s=t.oxw();return t.KtG(s.sortMode=o)})("ionChange",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.setSet(o.orginal))}),t.TgZ(38,"ion-select-option",15),t._uU(39,"Normal"),t.qZA(),t.TgZ(40,"ion-select-option",16),t._uU(41,"Stat. Asc."),t.qZA(),t.TgZ(42,"ion-select-option",17),t._uU(43,"Stat. Desc."),t.qZA(),t.TgZ(44,"ion-select-option",18),t._uU(45,"Alpha. Asc."),t.qZA(),t.TgZ(46,"ion-select-option",19),t._uU(47,"Alpha. Desc."),t.qZA()()()()()(),t.TgZ(48,"ion-row")(49,"ion-col"),t.YNc(50,v,1,0,"div",20),t.YNc(51,y,3,0,"ng-template",null,21,t.W1O),t.YNc(53,J,1,2,"ng-template",null,22,t.W1O),t.TgZ(55,"ion-button",23),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.newCard())}),t._UZ(56,"ion-icon",24),t.qZA()()()()}if(2&r){const e=t.MAs(52),n=t.MAs(54),o=t.oxw();t.xp6(6),t.hij("Set: ",o.set.name,""),t.xp6(2),t.hij("User: ",o.set.userid,""),t.xp6(1),t.Q6J("disabled",o.canBeLearned())("routerLink","/learning/"+o.id+"/false"),t.xp6(4),t.Q6J("disabled",o.canBeLearned())("routerLink","/learning/"+o.id+"/true"),t.xp6(19),t.hij(" ",o.set.data.length," Cards "),t.xp6(5),t.Q6J("ngModel",o.sortMode),t.xp6(13),t.Q6J("ngIf",o.set.data.length>0)("ngIfThen",n)("ngIfElse",e)}}class m{constructor(i,e,n,o){this.alertController=i,this.modalController=e,this.activatedRoute=n,this.apiService=o,this.set=null,this.orginal=null,this.userStat=null,this.editMode=!1,this.editId=-1,this.sortMode="norm"}ngOnInit(){this.id=this.activatedRoute.snapshot.paramMap.get("id")}sort(i){var e=this;return(0,g.Z)(function*(){return"alphaAsc"==e.sortMode?i.data=yield i.data.sort((n,o)=>n.first.localeCompare(o.first)):"alphaDesc"==e.sortMode?i.data=yield i.data.sort((n,o)=>o.first.localeCompare(n.first)):null!=e.userStat&&null!=e.userStat.data&&("statAsc"==e.sortMode?i.data=yield i.data.sort((n,o)=>(e.getStat(o._id,"success")+1)/(e.getStat(o._id,"wrong")+1)-(e.getStat(n._id,"success")+1)/(e.getStat(n._id,"wrong")+1)):"statDesc"==e.sortMode&&(i.data=yield i.data.sort((n,o)=>(e.getStat(o._id,"wrong")+1)/(e.getStat(o._id,"success")+1)-(e.getStat(n._id,"wrong")+1)/(e.getStat(n._id,"success")+1)))),yield i})()}ionViewWillEnter(){this.apiService.getSet(this.id).then(i=>{this.setSet(i),this.apiService.getUserStats(this.id).then(e=>{this.userStat=e})})}setSet(i){this.orginal=i,this.sort(i).then(e=>{this.set=e})}itemTrackBy(i,e){return e._id}status(){return JSON.stringify(this.set)}canBeLearned(){var i;return null!=this.set&&null!=(null===(i=this.set)||void 0===i?void 0:i.data)&&this.set.data.length<=0}getLines(){return this.editMode?"full":"none"}newCard(){this.orginal.data.push({first:"",second:""}),this.apiService.updateSet(this.orginal.id,this.orginal).then(i=>{this.apiService.getSet(this.id).then(e=>{this.setSet(e)})})}editCard(i){this.editMode=!this.editMode,this.editId=i,this.editMode||this.apiService.updateSet(this.set.id,this.set).then(e=>{this.apiService.getSet(this.id).then(n=>{this.setSet(n)})})}deleteCard(i){if(this.editMode)this.editMode=!1;else for(let e=0;e<this.set.data.length;e++)if(this.set.data[e]._id==i){this.alertController.create({header:"Delete",message:"Are you sure you want to delete this Card?",buttons:[{text:"No"},{text:"Yes",handler:()=>{this.set.data.splice(e,1),this.apiService.updateSet(this.set.id,this.set).then(n=>{this.apiService.getSet(this.id).then(o=>{this.setSet(o)})})}}]}).then(n=>n.present());break}}getStat(i,e){if(null!=this.userStat&&null!=this.userStat.data)for(let n=0;n<this.userStat.data.length;n++)if(this.userStat.data[n].cardid==i)return null!=this.userStat.data[n].stat[e]?this.userStat.data[n].stat[e]:0;return 0}getStar(i){if(null!=this.userStat&&null!=this.userStat.data)for(let e=0;e<this.userStat.data.length;e++)if(this.userStat.data[e].cardid==i)return null!=this.userStat.data[e].stared&&this.userStat.data[e].stared;return!1}setStar(i){this.apiService.updateUserStared(this.id,i,!this.getStar(i)).then(e=>{if(null!=this.userStat&&null!=this.userStat.data)for(let n=0;n<this.userStat.data.length;n++)this.userStat.data[n].cardid==i&&(this.userStat.data[n].stared=!this.userStat.data[n].stared);this.apiService.getUserStats(this.id).then(n=>{this.userStat=n})})}export(){this.modalController.create({component:_,componentProps:{set:this.set}}).then(i=>i.present())}import(){this.modalController.create({component:h}).then(i=>{i.present(),i.onWillDismiss().then(e=>{for(let n=0;n<e.data.length;n++)this.set.data.push(e.data[n]);this.apiService.updateSet(this.set.id,this.set).then(n=>{this.apiService.getSet(this.id).then(o=>{this.setSet(o)})})})})}isEditMode(i){return this.editMode&&this.editId==i}}m.\u0275fac=function(i){return new(i||m)(t.Y36(a.Br),t.Y36(a.IN),t.Y36(f.gz),t.Y36(C.s))},m.\u0275cmp=t.Xpm({type:m,selectors:[["app-set"]],decls:11,vars:4,consts:[[3,"translucent"],["slot","start"],[4,"ngIf","ngIfThen"],["name","circular",1,"spinner-center",3,"hidden"],["loaded",""],[1,"flex-container"],[1,"flex-item","flex-item-25"],["routerDirection","root",1,"flex-item","flex-item-25",3,"disabled","routerLink"],["color","warning","ios","star-outline","md","star-sharp"],[1,"flex-item","flex-item-25",3,"click"],[1,"flex-item","flex-item-100","flex-container"],[1,"flex-item","flex-item-75"],["lines","none"],["color","medium"],["interface","popover",3,"ngModel","ngModelChange","ionChange"],["value","norm"],["value","statAsc"],["value","statDesc"],["value","alphaAsc"],["value","alphaDesc"],[4,"ngIf","ngIfThen","ngIfElse"],["empty",""],["notEmpty",""],["expand","block","fill","clear",3,"click"],["ios","add-outline","md","add-sharp","slot","icon-only"],[1,"ion-justify-content-center"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"ion-align-items-center","ion-padding-vertical"],["sizeMd","6","sizeXs","6",1,"ion-no-padding",3,"sizeXl"],[1,"text-big",3,"lines"],["autoGrow","true","placeholder","Value",1,"ion-no-margin","ion-no-padding","ion-text-wrap",3,"ngModel","readonly","ngModelChange"],["autoGrow","true","placeholder","Key",1,"ion-no-margin","ion-no-padding","ion-text-wrap",3,"ngModel","readonly","ngModelChange"],[3,"ngIf"],[1,"ion-no-padding",3,"sizeMd","sizeXl","sizeXs"],["color","danger","expand","block","fill","clear",3,"click"],["ios","close-outline","md","close-sharp","slot","icon-only"],["ios","checkmark-outline","md","checkmark-sharp","slot","icon-only",3,"hidden"],["ios","pencil-outline","md","pencil-sharp","slot","icon-only",3,"hidden"],["sizeMd","2","sizeXl","1","sizeXs","4",1,"ion-no-padding"],[1,"ion-text-center"],[1,"ion-no-margin"],["color","danger","ios","trending-down-outline","md","trending-down-sharp"],["sizeMd","2","sizeXl","2","sizeXs","4",1,"ion-no-padding"],["color","warning","ios","help-outline","md","help-sharp"],["color","success","ios","trending-up-outline","md","trending-up-sharp"],["expand","block","fill","clear",3,"color","click"],["ios","star-outline","md","star-sharp","slot","icon-only"]],template:function(i,e){if(1&i&&(t.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1),t._UZ(3,"ion-menu-button"),t.qZA(),t.TgZ(4,"ion-title"),t._uU(5,"Set"),t.qZA()()(),t.TgZ(6,"ion-content"),t.YNc(7,b,1,0,"div",2),t._UZ(8,"ion-spinner",3),t.YNc(9,U,57,11,"ng-template",null,4,t.W1O),t.qZA()),2&i){const n=t.MAs(10);t.Q6J("translucent",!0),t.xp6(7),t.Q6J("ngIf",null!==e.set)("ngIfThen",n),t.xp6(1),t.Q6J("hidden",null!==e.set)}},dependencies:[x.sg,x.O5,p.JJ,p.On,a.YG,a.Sm,a.PM,a.Zi,a.Dq,a.wI,a.W2,a.jY,a.Gu,a.gu,a.Ie,a.Q$,a.fG,a.Nd,a.t9,a.n0,a.PQ,a.yW,a.g2,a.wd,a.sr,a.QI,a.j9,a.YI,f.rH]});const k=[{path:"",component:m}];class c{}c.\u0275fac=function(i){return new(i||c)},c.\u0275mod=t.oAB({type:c}),c.\u0275inj=t.cJS({imports:[f.Bz.forChild(k),f.Bz]});class u{}u.\u0275fac=function(i){return new(i||u)},u.\u0275mod=t.oAB({type:u}),u.\u0275inj=t.cJS({imports:[x.ez,p.u5,a.Pc,c]})}}]);